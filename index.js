"use strict";!function(){var e=window.Marzipano,t=window.bowser,o=window.screenfull,n=window.APP_DATA,i=document.querySelector("#pano"),r=(document.querySelector("#titleBar .sceneName"),document.querySelectorAll("#sceneList .scene")),s=document.querySelector(".interiorrbtn"),a=document.querySelector(".exteriorbtn"),d=document.querySelector("#fullscreenToggle");if(s.addEventListener("click",function(){E(M("12-front_interior"))}),a.addEventListener("click",function(){E(M("0-front"))}),window.matchMedia){var c=function(){l.matches?(document.body.classList.remove("desktop"),document.body.classList.add("mobile")):(document.body.classList.remove("mobile"),document.body.classList.add("desktop"))},l=matchMedia("(max-width: 500px), (max-height: 500px)");c(),l.addListener(c)}else document.body.classList.add("desktop");document.body.classList.add("no-touch"),window.addEventListener("touchstart",function(){document.body.classList.remove("no-touch"),document.body.classList.add("touch")}),t.msie&&parseFloat(t.version)<11&&document.body.classList.add("tooltip-fallback");var m={controls:{mouseViewMode:n.settings.mouseViewMode}},u=new e.Viewer(i,m),p=n.scenes.map(function(t){var o=e.ImageUrlSource.fromString("tiles/"+t.id+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:"tiles/"+t.id+"/preview.jpg"}),n=new e.CubeGeometry(t.levels),i=e.RectilinearView.limit.traditional(t.faceSize,100*Math.PI/180,120*Math.PI/180),r=new e.RectilinearView(t.initialViewParameters,i),s=u.createScene({source:o,geometry:n,view:r,pinFirstLevel:!0});return t.linkHotspots.forEach(function(e){var t=function(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("link-hotspot");var o=document.createElement("img");"8-front_open"==e.target||"9-left_side_open"==e.target||"10-back_open"==e.target||"11-right_side_open"==e.target||"1-front"==e.target?(o.src="img/down-arrow.png",o.classList.add("link-hotspot-icon-arrow")):"14-side_interior"==e.target||"12-front_interior"==e.target||"13-back_interior"==e.target?(o.src="img/down.png",o.classList.add("link-hotspot-icon-seat")):(o.src="img/marker.webp",o.classList.add("link-hotspot-icon"));for(var n=["-ms-transform","-webkit-transform","transform"],i=0;i<n.length;i++){var r=n[i];o.style[r]="rotate("+e.rotation+"rad)"}t.addEventListener("click",function(){E(M(e.target))}),b(t);var s=document.createElement("div");return s.classList.add("hotspot-tooltip"),t.appendChild(o),t.appendChild(s),t}(e);s.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch})}),t.infoHotspots.forEach(function(e){var t=function(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("info-hotspot");var o=document.createElement("div");o.classList.add("info-hotspot-header");var n=document.createElement("div");n.classList.add("info-hotspot-icon-wrapper");var i=document.createElement("img");i.src="img/info.png",i.classList.add("info-hotspot-icon"),n.appendChild(i);var r=document.createElement("div");r.classList.add("info-hotspot-title-wrapper");var s=document.createElement("div");s.classList.add("info-hotspot-title"),s.innerHTML=e.title,r.appendChild(s);var a=document.createElement("div");a.classList.add("info-hotspot-close-wrapper");var d=document.createElement("img");d.src="img/close.png",d.classList.add("info-hotspot-close-icon"),a.appendChild(d),o.appendChild(n),o.appendChild(r),o.appendChild(a);var c=document.createElement("div");c.classList.add("info-hotspot-text"),c.innerHTML=e.text,t.appendChild(o),t.appendChild(c);var l=document.createElement("div");l.innerHTML=t.innerHTML,l.classList.add("info-hotspot-modal"),document.body.appendChild(l);var m=function(){t.classList.toggle("visible"),l.classList.toggle("visible")};return t.querySelector(".info-hotspot-header").addEventListener("click",m),l.querySelector(".info-hotspot-close-wrapper").addEventListener("click",m),b(t),t}(e);s.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch})}),{data:t,scene:s,view:r}});o.enabled&&n.settings.fullscreenButton?(document.body.classList.add("fullscreen-enabled"),d.addEventListener("click",function(){o.toggle()}),o.on("change",function(){o.isFullscreen?d.classList.add("enabled"):d.classList.remove("enabled")})):document.body.classList.add("fullscreen-disabled");var h=document.querySelector("#viewUp"),v=document.querySelector("#viewDown"),f=document.querySelector("#viewLeft"),w=document.querySelector("#viewRight"),g=document.querySelector("#viewIn"),L=document.querySelector("#viewOut"),y=u.controls();function E(e){e.view.setParameters(e.data.initialViewParameters),e.scene.switchTo(),function(e){for(var t=0;t<r.length;t++){var o=r[t];o.getAttribute("data-id")===e.data.id?o.classList.add("current"):o.classList.remove("current")}}(e)}function b(e,t){t=["touchstart","touchmove","touchend","touchcancel","wheel","mousewheel"];for(var o=0;o<t.length;o++)e.addEventListener(t[o],function(e){e.stopPropagation()})}function M(e){for(var t=0;t<p.length;t++)if(p[t].data.id===e)return p[t];return null}y.registerMethod("upElement",new e.ElementPressControlMethod(h,"y",-.7,3),!0),y.registerMethod("downElement",new e.ElementPressControlMethod(v,"y",.7,3),!0),y.registerMethod("leftElement",new e.ElementPressControlMethod(f,"x",-.7,3),!0),y.registerMethod("rightElement",new e.ElementPressControlMethod(w,"x",.7,3),!0),y.registerMethod("inElement",new e.ElementPressControlMethod(g,"zoom",-.7,3),!0),y.registerMethod("outElement",new e.ElementPressControlMethod(L,"zoom",.7,3),!0),E(p[0])}();